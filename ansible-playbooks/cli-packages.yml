
---
- name: cli-packages
  hosts: localhost
  tasks:
      - name: Download AWS zip
        shell: 'curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "{{ playbook_dir  }}/awscliv2.zip"'
      
      - name: Unzip AWS zip
        shell: 'unzip {{ playbook_dir }}/awscliv2.zip'

      - name: Install AWS CLI
        shell: 'sudo {{ playbook_dir  }}/aws/install -u'
        become: true

      - name: Clean up AWS install dir
        shell: 'rm -rf {{ playbook_dir  }}/aws'
      
      - name: Clean up AWS cli zip
        shell: 'rm {{ playbook_dir  }}/awscliv2.zip'

